<script type="text/javascript">
    function searchClick() {
        $('#dlg-search input').val("");
        $('#dlg-search').dialog('open').dialog('setTitle', '查询');
        $('#OrderDate').datebox({ editable: false });
    }

    function select() {
        var queryParams = $('#details').datagrid('options').queryParams;
        queryParams.OrderDate = $('#OrderDate').datebox('getValue');
        queryParams.BatchNo = $('#BatchNo').val();
        queryParams.SortingLineCode = $("#searchSortingLineCode").val();
        queryParams.ProductCode = $("#productCode1").val();
        $('#details').datagrid('options').queryParams = queryParams;
        $('#details').datagrid({
            pageNumber: 1,
            pageSize: 50
        });
        $('#details').datagrid("reload");
        $('#dlg-search').dialog("close");
    }
    //分拣线查询
    function SortingLineSearchClick() {
        $('#dlg-SortingLine').dialog('open').dialog('setTitle', '选择分拣线');
        $('#SortingLineDetails').datagrid({ url: '/SortingLine/Details/' });
        $("#SortingLineDetails").datagrid('load');
    }
</script>
<div id="dlg-search" class="easyui-dialog" modal="true" style="width:300px;height:260px;padding:2px 2px"
		closed="true" buttons="#dlg-buttons-search">
    <div class="easyui-layout" fit="true">
        <div region="center" border="false" style="padding:10px 10px;background:#fff;border:1px solid #ccc; ">
            <table width ="250">
                <tr>
                    <td style="text-align: right">
                        订单日期:
                    </td>
                    <td><input id="OrderDate" type="text" style="width: 130px " class="easyui-datebox" readonly="true" ></td>
                </tr> 
                                         
                <tr>
                    <td style="text-align: right">
                        批次号:
                    </td>
                    <td width="168">
                        <input id="BatchNo" name="Batch" type="text" class="easyui-numberbox"/>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: right">
                        分拣线代码:
                    </td>
                    <td align="left" style="width: 170px;">
                        <input id="searchSortingLineCode" name="SortingLineCode" class="easyui-validatebox"
                            readonly="readonly"/>
                        <a href="#" id="SortingLineSearch" class="easyui-linkbutton" iconcls="icon-search"
                            plain="true" onclick="SortingLineSearchClick()"></a>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: right">
                        分拣线名称:
                    </td>
                    <td align="left">
                        <input type="text" name="SortingLineName" class="easyui-validatebox"
                            id="searchSortingLineName" readonly="true" />
                    </td>
                </tr>
                <tr>
                    <td>卷烟编码</td>
                    <td><input id="productCode1" name="ProductCode" class="easyui-validatebox"/>
                        <a href="#" onclick="productQuery()" class="easyui-linkbutton" iconcls="icon-search" plain="true"></a>
                    </td>
                </tr>
                <tr>
                    <td>卷烟名称</td>
                    <td><input id="productName1" name="ProductName" /></td>
                </tr>
            </table>
        </div>
    </div>
</div>
<div id="dlg-buttons-search">
	<a href="#" class="easyui-linkbutton" iconCls="icon-ok" onclick="select()">查询</a>
	<a href="#" class="easyui-linkbutton" iconCls="icon-cancel" onclick="javascript:$('#dlg-search').dialog('close')">取消</a>
</div>
@Html.Partial("../Product/_ProductPartial")
@Html.Partial("_SortingLinePartial")